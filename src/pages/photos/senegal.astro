---
import PageLayout from "@layouts/PageLayout.astro";
import Container from "@components/Container.astro";
import BackToPrev from "@components/BackToPrev.astro";
import { getCountryPhotos } from "@data/photos";
import "@fancyapps/ui/dist/fancybox/fancybox.css";

const country = getCountryPhotos("senegal");
if (!country) return Astro.redirect("/photos");
---

<PageLayout title={`${country.name} Photos`} description={`Photos from ${country.name}`}>
  <Container>
    <div class="animate">
      <BackToPrev href="/photos">
        Back to photos
      </BackToPrev>
    </div>
    <div class="my-10">
      <h1 class="animate text-4xl font-display font-semibold text-black dark:text-white">{country.name}</h1>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-6xl mx-auto items-start justify-items-center">
      {country.photos.map((photo, index) => (
        <a
          href={photo.src}
          data-fancybox="gallery"
          class="animate overflow-hidden block cursor-pointer"
        >
          <img
            src={photo.src}
            alt={photo.alt}
            loading={index < 6 ? "eager" : "lazy"}
            decoding="async"
            class="w-full h-auto hover:scale-105 transition-transform duration-300"
          />
        </a>
      ))}
    </div>
  </Container>
</PageLayout>

<script>
  import { Fancybox } from "@fancyapps/ui";

  Fancybox.bind("[data-fancybox]", {
    theme: "auto",
    Carousel: {
      transition: "slide",
    },
  });
</script>
